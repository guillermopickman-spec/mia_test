services:
  - type: web
    name: market-intel-agent
    env: docker
    dockerfilePath: ./Dockerfile
    dockerContext: .
    plan: starter
    region: oregon
    repo: https://github.com/guillermopickman-spec/market-intel-agent
    branch: v1.3
    buildCommand: ""
    startCommand: uvicorn main:app --host 0.0.0.0 --port $PORT
    envVars:
      # Database - Set this in Render dashboard (use Render PostgreSQL service)
      - key: DATABASE_URL
        sync: false
      
      # LLM Configuration
      - key: LLM_PROVIDER
        value: groq
      - key: GROQ_API_KEY
        sync: false
      - key: GEMINI_API_KEY
        sync: false
      - key: HF_API_TOKEN
        sync: false
      - key: HF_MODEL_NAME
        value: deepseek-ai/DeepSeek-V3
      
      # Note: Embeddings now use Gemini (text-embedding-004) exclusively
      # GEMINI_API_KEY is required for embeddings
      
      # Integrations
      - key: RESEND_API_KEY
        sync: false
      - key: NOTION_TOKEN
        sync: false
      - key: NOTION_PAGE_ID
        sync: false
      - key: EMAIL_USER
        sync: false
      - key: EMAIL_PASSWORD
        sync: false
      
      # System Settings
      - key: CORS_ALLOWED_ORIGINS
        sync: false
      - key: CHROMA_SERVER_NO_ANALYTICS
        value: "true"
      - key: HTTP_REQUEST_TIMEOUT
        value: "30"
      - key: LLM_REQUEST_TIMEOUT
        value: "60"
      - key: SCRAPER_TIMEOUT
        value: "60"
    healthCheckPath: /ready
